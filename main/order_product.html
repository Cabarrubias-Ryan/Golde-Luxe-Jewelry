<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Golde Luxe Jewelry - Order</title>
  <link rel="stylesheet" href="../css/about.css">
  <link rel="stylesheet" href="../css/order.css">
</head>
<body>
  <header>
    <div class="logo-section">
      <a href="main.html"><img src="../img/logo.png" alt="Logo" class="logo-image"></a>
      <div class="logo-text">
        <h1>GOLDE LUXE JEWELRY</h1>
        <p>"Adorn yourself with brilliance."</p>
      </div>
    </div>
    <nav>
      <a href="history.html">ABOUT US</a>
      <a href="info.html">INFO</a>
      <a href="product.html">PRODUCT</a>
      <a href="order_product.html" class="active">ORDER</a>
      <a href="account.html">MY ACCOUNT</a>
    </nav>
  </header>

  <main>
    <section class="order-sidebar">
      <h2>ORDER</h2>
      <a href="order_product.html" class="active">ORDER</a>
      <a href="order.html">SHIPPING</a>
      <a href="return.html">RETURN POLICY</a>
      <a href="warranty.html">WARRANTY</a>
      <a href="reviews.html">MY REVIEWS</a>
    </section>

    <section class="order-section">
        <div class="order-container">
            <h1>Order Now</h1>
            <p class="intro">
            Please fill out this form to place your order. Our team will contact you to confirm the details and arrange payment and shipping.
            </p>

            <form class="order-form" id="orderForm">
            <section>
                <h2>Customer Information</h2>
                <label>Full Name</label>
                <input name="name" type="text" placeholder="Enter your full name" required />

                <label>Contact Number</label>
                <input name="phone" type="tel" placeholder="09XXXXXXXXX" required />

                <label>Email Address</label>
                <input name="email" type="email" placeholder="example@email.com" required />

                <label>Shipping Address</label>
                <input name="address" type="text" placeholder="House number, Street" required />
                <input name="barangay" type="text" placeholder="Barangay" required />
                <input name="city" type="text" placeholder="City" required />
                <input name="province" type="text" placeholder="Province" required />
                <input name="postcode" type="text" placeholder="Postcode" required />
            </section>

            <section>
                <h2>Order Details</h2>

                <div class="price-list">
                <ul>
                    <li><span>➤</span> Earrings: ₱99 – ₱199</li>
                    <li><span>➤</span> Bracelets: ₱199 – ₱299</li>
                    <li><span>➤</span> Necklace: ₱299 – ₱499</li>
                    <li><span>➤</span> Luxury Sets: ₱499 – ₱999</li>
                    <li><span>➤</span> Custom Jewelry: starts at ₱999</li>
                </ul>
                </div>

                <label>Select Jewelry Type</label>
                <select name="jewelryType" required>
                <option value="">-- Select --</option>
                <option value="Earring">Earring</option>
                <option value="Bracelet">Bracelet</option>
                <option value="Necklace">Necklace</option>
                <option value="Luxury Set">Luxury Set</option>
                <option value="Custom Jewelry">Custom Jewelry</option>
                </select>

                <label>Quantity</label>
                <input name="quantity" type="number" min="1" value="1" required />

                <label>Add Custom Engraving?</label>
                <select id="engravingSelect" name="engraving">
                <option value="No">No</option>
                <option value="Yes">Yes</option>
                </select>

                <div id="engravingTextField" class="hidden">
                <label>Enter your engraving text</label>
                <input name="engravingText" type="text" placeholder="Your engraving text here..." />
                </div>
            </section>

            <section>
                <h2>Payment & Shipping</h2>
                <label>Payment Method</label>
                <select name="paymentMethod" required>
                <option value="">-- Select --</option>
                <option value="GCash">GCash</option>
                <option value="Bank Transfer">Bank Transfer</option>
                <option value="COD">COD (Cash on Delivery)</option>
                </select>

                <label>Shipping Option</label>
                <select name="shippingOption" required>
                <option value="">-- Select --</option>
                <option value="Standard">Standard (3–5 business days)</option>
                <option value="Express">Express (1–2 business days)</option>
                </select>
            </section>

            <section>
                <h2>Return & Warranty Policy</h2>
                <p>
                    We value your satisfaction. Please review our policies on returns and warranty available on our website before confirming your order.
                </p>
                <div style="margin-bottom: 10px;">
                    <label style="cursor: pointer;">
                    <input type="checkbox" required style="vertical-align: middle; margin-right: 8px;" />
                    I have read and agree to the return and warranty policy.
                    </label>
                </div>

                <div>
                    <label style="cursor: pointer;">
                    <input type="checkbox" required style="vertical-align: middle; margin-right: 8px;" />
                    I confirm that the information provided is accurate.
                    </label>
                </div>
            </section>

            <section>
                <h2>Optional</h2>
                <label>Upload Reference Photo (For custom jewelry requests)</label>
                <input type="file" accept="image/*" />

                <label>Additional Notes / Instructions</label>
                <textarea name="notes" rows="3" placeholder="Enter any special instructions..."></textarea>
            </section>

            <button type="submit">Submit Order</button>
            <div id="orderMessage" role="status" style="margin-top:8px"></div>
            </form>

            <footer class="order-footer">
            <p>Thank you for your order! You’ll receive a confirmation message via email or SMS soon.</p>
            <p>For inquiries, contact us at <a href="https://goldeluxejewelry.com">goldeluxejewelry.com</a> or 09466239333.</p>
            </footer>
        </div>

    <script>
      const engravingSelect = document.getElementById('engravingSelect');
      const engravingField = document.getElementById('engravingTextField');
      const orderForm = document.getElementById('orderForm');
      const orderMessage = document.getElementById('orderMessage');

      engravingSelect.addEventListener('change', function () {
        engravingField.classList.toggle('hidden', this.value !== 'Yes');
      });

      orderForm.addEventListener('submit', async function (e) {
        e.preventDefault();
        orderMessage.textContent = '';
        const formData = new FormData(orderForm);
        const payload = {
          name: formData.get('name'),
          phone: formData.get('phone'),
          email: formData.get('email'),
          address: formData.get('address'),
          barangay: formData.get('barangay'),
          city: formData.get('city'),
          province: formData.get('province'),
          postcode: formData.get('postcode'),
          jewelryType: formData.get('jewelryType'),
          quantity: formData.get('quantity'),
          engraving: formData.get('engraving') === 'Yes' ? formData.get('engravingText') : 'No',
          paymentMethod: formData.get('paymentMethod'),
          shippingOption: formData.get('shippingOption'),
          notes: formData.get('notes')
        };

        try {
        // determine API base: when served from the backend use same origin, when
        // opened as file or developing locally use localhost:3000
        const apiBase = (window.location.protocol === 'file:')
          ? 'http://localhost:3000'
          : window.location.origin;

        const res = await fetch(apiBase + '/send-order', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(payload)
          });
          const data = await res.json();
          if (res.ok) {
            orderMessage.style.color = 'green';
            orderMessage.textContent = 'Order submitted successfully. We will contact you soon.';
            orderForm.reset();
            engravingField.classList.add('hidden');
          } else {
            orderMessage.style.color = 'red';
            orderMessage.textContent = data && data.error ? data.error : 'Failed to submit order.';
          }
        } catch (err) {
          orderMessage.style.color = 'red';
          orderMessage.textContent = 'Network error — could not submit order.';
        }
      });
    </script>
    </section>
  </main>

  <footer>
    <div>
      <img src="../img/no..png" alt="">
    </div>
    <div>
      <div style="color: black">goldeluxejewelry.com</div>
      <div style="color: black">09466239333</div>
    </div>
  </footer>
</body>
</html>
